<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
 		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" integrity="sha512-07I2e+7D8p6he1SIM+1twR5TIrhUQn9+I6yjqD53JQjFiMf8EtC93ty0/5vJTZGF8aAocvHYNEDJajGdNx1IsQ==" crossorigin=""/>
		<style>
		*{
			margin: 0;
			padding: 0;
		}
		.map {
			height: 100%;
			width: 100%;
			position: fixed;
		}
  		</style>
 		<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js" integrity="sha512-A7vV8IFfih/D732iSSKi20u/ooOfj/AGehOKq0f4vLT1Zr2Y+RX7C+w8A1gaSasGtRUZpF/NZgzSAu4/Gc41Lg==" crossorigin=""></script>
		<title>World Map</title>
	</head>
	<body>
		<div id="marker" title="Marker"></div>
		<div id="map" class="map"></div>
		<script type="text/javascript">
			function icon(color){
				return new L.Icon({
				  iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-' + color + '.png',
				  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
				  iconSize: [25, 41],
				  iconAnchor: [12, 41],
				  popupAnchor: [1, -34],
				  shadowSize: [41, 41]
				});
			}
			var greenIcon = icon('green');
			var blueIcon = icon('blue');
			var redIcon = icon('red');
			var orangeIcon = icon('orange');
			var icons = { s: orangeIcon, e: redIcon, both: greenIcon, all: blueIcon };

			var places = [
				["England", "all"],
				["Scotland", "all"],
				["Wales", "both"],
				["Spain", "both"],
				["Portugal", "s"],
				["Ireland", "both"],
				["Northern Ireland", "both"],
				["France", "both"],
				["Germany", "all"],
				["Switzerland", "s"],
				["Italy", "all"],
				["Netherlands", "all"],
				["Belgium", "both"],
				["Turkey", "s"],
				["Cyprus", "s"],
				["Greece", "s"],
				["Czech Republic", "both"],
				["Australia", "both"],
				["United Arab Emirates", "both"],
				["Bali, Indonesia", "e"],
				["New Zealand", "e"],
				["Singapore", "e"],
				["Canada", "e"],
				["Lanzarote", "all"],
				["Tenerife", "both"],
				["Fuerteventura", "all"]
			];

			var map = L.map('map').setView([40.0, 0.0], 2);
			var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
			var osmAttrib='Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
			var osm = new L.TileLayer(osmUrl, {minZoom: 2, maxZoom: 12, attribution: osmAttrib});
			map.addLayer(osm);

			places.forEach(function(place){
				var name = place[0];
				var who = place[1];
				var url = "http://nominatim.openstreetmap.org/search/" + encodeURIComponent(name) + "?format=json";
				var request = new XMLHttpRequest();
				request.onreadystatechange = function () {
    					if (this.readyState === 4){
						var json = JSON.parse(request.responseText);
						var lat = json[0].lat;
						var lon = json[0].lon;
						L.marker([lat, lon], {icon: icons[who]})
							.addTo(map)
							.bindTooltip(name + ': ' + who);
					}
				};
				request.open('GET', url, true);
				request.send(null);
			});
		</script>
	</body>
</html>

